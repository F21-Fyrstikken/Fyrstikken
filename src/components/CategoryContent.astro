---
import ProjectCard from "./ui/ProjectCard.astro";
import Breadcrumb from "./ui/Breadcrumb.astro";
import type { ICategory, IProject } from "../types/sanity";

interface Props {
  year: string;
  categoryData: ICategory;
  projects: IProject[];
  basePath?: string;
}

const { year, categoryData, projects, basePath = "" } = Astro.props;

const breadcrumbItems = [
  { label: "Ã…rs", href: "/years" },
  { label: year, href: `/years/${year}` },
];

const hasProjects = projects && projects.length > 0;
---

<div>
  <div class="page-header-content">
    <Breadcrumb items={breadcrumbItems} basePath={basePath} />
    <h1>{categoryData.title}</h1>
    {categoryData.description && <p class="category-description">{categoryData.description}</p>}
  </div>

  {
    hasProjects ? (
      <div class="projects-grid">
        {projects.map((project) => (
          <ProjectCard
            project={project}
            href={`${basePath}/years/${year}/${categoryData.slug.current}/${project.slug.current}/`}
          />
        ))}
      </div>
    ) : (
      <p>Ingen prosjekter funnet i denne kategorien.</p>
    )
  }
</div>

<style>
  .category-description {
    font-size: 1.2rem;
    opacity: 0.85;
    margin-top: 0.75rem;
    font-weight: 400;
  }

  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
  }

  @media (max-width: 768px) {
    .projects-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
  }

  @media (min-width: 769px) and (max-width: 1024px) {
    .projects-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
</style>
